[gd_scene load_steps=35 format=3 uid="uid://0jybnryjbe51"]

[ext_resource type="Texture2D" uid="uid://cue46gcr7x6qj" path="res://assets/environment/barn/barn_wall.jpg" id="1_553eq"]
[ext_resource type="Script" path="res://scenes/intro.gd" id="1_gdkj6"]
[ext_resource type="Texture2D" uid="uid://yrm7tdljfide" path="res://assets/environment/barn/barn_floor.jpg" id="2_1wljg"]
[ext_resource type="PackedScene" uid="uid://cyu6wosf2qc3v" path="res://scenes/chonki.tscn" id="3_meeps"]
[ext_resource type="Texture2D" uid="uid://qx1ubqqi74hv" path="res://assets/collectibles/menu-icons/heart.png" id="4_ee0bn"]
[ext_resource type="PackedScene" uid="uid://da1xtclqphxbr" path="res://scenes/characters/npc_dog.tscn" id="5_c0o7x"]
[ext_resource type="PackedScene" uid="uid://ft24k8s13tpc" path="res://scenes/composable/instructional_text.tscn" id="7_2gl52"]
[ext_resource type="Script" path="res://scenes/NPCDogNavigationAgent2D.gd" id="7_dep77"]
[ext_resource type="Script" path="res://scenes/MoveLeftOrRightText.gd" id="7_y0mp2"]
[ext_resource type="Script" path="res://scenes/composable/jump_text.gd" id="9_72lhp"]
[ext_resource type="Texture2D" uid="uid://c6606orxhye10" path="res://assets/environment/barn/forklift_body.png" id="9_ffq42"]
[ext_resource type="Texture2D" uid="uid://dkbc4i868evsa" path="res://assets/environment/barn/hay_barrel.png" id="9_hvagn"]
[ext_resource type="Texture2D" uid="uid://bfxtrf11y4w6e" path="res://assets/environment/barn/forklift_fork.png" id="10_lykgv"]
[ext_resource type="PackedScene" uid="uid://dshggbjhf1bpj" path="res://scenes/composable/instruction_trigger.tscn" id="12_hq858"]
[ext_resource type="PackedScene" uid="uid://cs71vpxi4b22q" path="res://scenes/composable/lever.tscn" id="13_50tjc"]
[ext_resource type="Script" path="res://scenes/ForkLiftForks.gd" id="13_xew14"]
[ext_resource type="PackedScene" uid="uid://c7gf3p8xwuyah" path="res://scenes/composable/follower_moves_to_target.tscn" id="17_pk6v0"]

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_ed647"]
distance = -500.0

[sub_resource type="CanvasItemMaterial" id="CanvasItemMaterial_ggcgc"]
blend_mode = 1
particles_animation = true
particles_anim_h_frames = 1
particles_anim_v_frames = 1
particles_anim_loop = true

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ev16l"]
size = Vector2(1525, 231)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_lwem5"]
size = Vector2(10361, 231)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_c0tnm"]
size = Vector2(1244, 231)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_oae7b"]
size = Vector2(1421.52, 227.336)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_wryiq"]
size = Vector2(1661.75, 993.471)

[sub_resource type="NavigationPolygon" id="NavigationPolygon_fowkj"]
vertices = PackedVector2Array(3982, -2239, 4000, -3602, 4960, -3578, 4972, -4337, 18967, -4348, 18942, -66, 2333, 66, -603, -2217, -622, -35)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2), PackedInt32Array(3, 4, 5, 2), PackedInt32Array(2, 5, 6, 0), PackedInt32Array(7, 0, 6, 8)])
outlines = Array[PackedVector2Array]([PackedVector2Array(2333, 76, 18952, -57, 18978, -4359, 4963, -4347, 4950, -3588, 3991, -3613, 3972, -2249, -613, -2227, -633, -26)])
source_geometry_group_name = &"navigation_polygon_source_group"

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_xtrc5"]
bounce = 0.5

[sub_resource type="CircleShape2D" id="CircleShape2D_rar7w"]
radius = 310.04

[sub_resource type="RectangleShape2D" id="RectangleShape2D_1xynk"]
size = Vector2(5635.79, 6340.83)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ih5xv"]
size = Vector2(20, 1.67627)

[sub_resource type="NavigationPolygon" id="NavigationPolygon_n5sh2"]
vertices = PackedVector2Array(1498, 800, 12, 800, 8, 17, 1496, 16)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3)])
outlines = Array[PackedVector2Array]([PackedVector2Array(-2, 8, 2, 810, 1508, 810, 1506, 6)])
source_geometry_group_name = &"navigation_polygon_source_group"

[sub_resource type="Gradient" id="Gradient_ug3vo"]
colors = PackedColorArray(0, 0, 0, 1, 1, 0.00784314, 1, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_pk8wi"]
gradient = SubResource("Gradient_ug3vo")
fill_from = Vector2(1, 0)
fill_to = Vector2(0, 0)

[sub_resource type="Gradient" id="Gradient_s5bmw"]
colors = PackedColorArray(0, 0, 0, 1, 0.691197, 0.629037, 0.24384, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_8sq0x"]
gradient = SubResource("Gradient_s5bmw")
fill_from = Vector2(1, 0.0192308)
fill_to = Vector2(0, 0)

[node name="Intro" type="Node2D"]
script = ExtResource("1_gdkj6")

[node name="Environment" type="Node2D" parent="."]
position = Vector2(-65, 502)

[node name="PhysicsBarriers" type="Node2D" parent="Environment"]

[node name="Ground" type="StaticBody2D" parent="Environment/PhysicsBarriers"]
position = Vector2(155, -2686)
scale = Vector2(10, 10)
collision_layer = 15
collision_mask = 255

[node name="CollisionShape2D" type="CollisionShape2D" parent="Environment/PhysicsBarriers/Ground"]
z_index = 100
position = Vector2(317, -500)
shape = SubResource("WorldBoundaryShape2D_ed647")
debug_color = Color(0.307035, 0.494072, 1, 0.42)

[node name="FloatWoods" type="Node2D" parent="Environment/PhysicsBarriers"]

[node name="FloatWood" type="StaticBody2D" parent="Environment/PhysicsBarriers/FloatWoods"]
position = Vector2(-3917, -634)

[node name="Sprite2D" type="Polygon2D" parent="Environment/PhysicsBarriers/FloatWoods/FloatWood"]
modulate = Color(0.988235, 0.729412, 0.188235, 1)
self_modulate = Color(0.568627, 0.65098, 0.501961, 1)
z_index = 1
texture_repeat = 2
material = SubResource("CanvasItemMaterial_ggcgc")
use_parent_material = true
position = Vector2(-2013, -1558)
scale = Vector2(5.26667, 1.435)
texture = ExtResource("1_553eq")
texture_offset = Vector2(500, 0)
polygon = PackedVector2Array(7.33307, -1547.73, 7.33307, -1388.15, 243.535, -1390.94, 243.149, -1551.92)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Environment/PhysicsBarriers/FloatWoods/FloatWood"]
z_index = 1
position = Vector2(-1239.5, -3668.5)
shape = SubResource("RectangleShape2D_ev16l")

[node name="FloatWood2" type="StaticBody2D" parent="Environment/PhysicsBarriers/FloatWoods"]
position = Vector2(-8536, -4745)

[node name="Sprite2D" type="Polygon2D" parent="Environment/PhysicsBarriers/FloatWoods/FloatWood2"]
modulate = Color(0.988235, 0.729412, 0.188235, 1)
self_modulate = Color(0.568627, 0.65098, 0.501961, 1)
z_index = 1
texture_repeat = 2
material = SubResource("CanvasItemMaterial_ggcgc")
use_parent_material = true
position = Vector2(-2013, -1558)
scale = Vector2(5.26667, 1.435)
texture = ExtResource("1_553eq")
texture_offset = Vector2(550, 100)
polygon = PackedVector2Array(7.33307, -1547.73, 7.33307, -1388.15, 1959.68, -1370.73, 1964.62, -1531.01)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Environment/PhysicsBarriers/FloatWoods/FloatWood2"]
z_index = 1
position = Vector2(3178.5, -3668.5)
shape = SubResource("RectangleShape2D_lwem5")

[node name="FloatWood4" type="StaticBody2D" parent="Environment/PhysicsBarriers/FloatWoods"]
position = Vector2(-2672, -2112)

[node name="Sprite2D" type="Polygon2D" parent="Environment/PhysicsBarriers/FloatWoods/FloatWood4"]
modulate = Color(0.988235, 0.729412, 0.188235, 1)
self_modulate = Color(0.568627, 0.65098, 0.501961, 1)
z_index = 1
texture_repeat = 2
material = SubResource("CanvasItemMaterial_ggcgc")
use_parent_material = true
position = Vector2(-2013, -1558)
scale = Vector2(5.26667, 1.435)
texture = ExtResource("1_553eq")
texture_offset = Vector2(500, 0)
polygon = PackedVector2Array(7.33307, -1547.73, 7.33307, -1388.15, 243.535, -1390.94, 243.149, -1551.92)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Environment/PhysicsBarriers/FloatWoods/FloatWood4"]
z_index = 1
position = Vector2(-1350, -3667.5)
shape = SubResource("RectangleShape2D_c0tnm")

[node name="FloatWood3" type="StaticBody2D" parent="Environment/PhysicsBarriers/FloatWoods"]
position = Vector2(-8704, -3282)
rotation = 1.56912
scale = Vector2(1.20811, 1.14374)

[node name="Sprite2D" type="Polygon2D" parent="Environment/PhysicsBarriers/FloatWoods/FloatWood3"]
modulate = Color(0.988235, 0.729412, 0.188235, 1)
self_modulate = Color(0.568627, 0.65098, 0.501961, 1)
z_index = 1
texture_repeat = 2
material = SubResource("CanvasItemMaterial_ggcgc")
use_parent_material = true
position = Vector2(-2013, -1558)
scale = Vector2(5.26667, 1.435)
texture = ExtResource("1_553eq")
texture_offset = Vector2(500, 0)
polygon = PackedVector2Array(7.33307, -1547.73, 7.33307, -1388.15, 243.535, -1390.94, 243.149, -1551.92)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Environment/PhysicsBarriers/FloatWoods/FloatWood3"]
z_index = 1
position = Vector2(-1442.47, -3669.34)
shape = SubResource("RectangleShape2D_oae7b")

[node name="WallTriangle" type="StaticBody2D" parent="Environment/PhysicsBarriers/FloatWoods"]
position = Vector2(-12937, 327.001)
rotation = 1.03181
scale = Vector2(1.20811, 1.14374)

[node name="Sprite2D" type="Polygon2D" parent="Environment/PhysicsBarriers/FloatWoods/WallTriangle"]
modulate = Color(0.988235, 0.729412, 0.188235, 1)
self_modulate = Color(0.568627, 0.65098, 0.501961, 1)
z_index = 1
texture_repeat = 2
material = SubResource("CanvasItemMaterial_ggcgc")
use_parent_material = true
position = Vector2(-398.414, -1733.97)
rotation = -0.498924
scale = Vector2(5.26667, 1.435)
texture = ExtResource("1_553eq")
texture_offset = Vector2(500, 0)
polygon = PackedVector2Array(7.33307, -1547.73, 7.33307, -1388.15, 243.535, -1390.94, 243.149, -1551.92)

[node name="CollisionShape2D" type="CollisionPolygon2D" parent="Environment/PhysicsBarriers/FloatWoods/WallTriangle"]
z_index = 1
position = Vector2(-1381, -3901.14)
polygon = PackedVector2Array(-278.052, 238.984, 413.763, -28.9673, 1093.43, -464.539, 443.217, 649.792)

[node name="BigWall" type="StaticBody2D" parent="Environment/PhysicsBarriers/FloatWoods"]
position = Vector2(-36690, 1123)
rotation = 1.56786
scale = Vector2(4.84301, 6.97693)

[node name="Sprite2D" type="Polygon2D" parent="Environment/PhysicsBarriers/FloatWoods/BigWall"]
modulate = Color(0.988235, 0.729412, 0.188235, 1)
self_modulate = Color(0.568627, 0.65098, 0.501961, 1)
z_index = 1
texture_repeat = 2
material = SubResource("CanvasItemMaterial_ggcgc")
use_parent_material = true
position = Vector2(-2026.2, 5727.93)
scale = Vector2(7.06718, 6.1298)
texture = ExtResource("1_553eq")
texture_offset = Vector2(500, 0)
polygon = PackedVector2Array(7.33307, -1547.73, 7.33307, -1388.15, 243.535, -1390.94, 243.149, -1551.92)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Environment/PhysicsBarriers/FloatWoods/BigWall"]
visible = false
z_index = 1
position = Vector2(-1146.37, -3279.26)
shape = SubResource("RectangleShape2D_wryiq")

[node name="Sprites" type="Node2D" parent="Environment"]

[node name="Wall" type="Polygon2D" parent="Environment/Sprites"]
texture_repeat = 2
position = Vector2(1151, -4013)
scale = Vector2(1.10874, 1.11339)
texture = ExtResource("1_553eq")
texture_offset = Vector2(0, 3750)
texture_scale = Vector2(0.25, 0.25)
polygon = PackedVector2Array(-10928.6, 213.761, 12113.8, 70.9543, 12156.1, -4042.61, -11011.6, -4012.07)

[node name="Floor" type="Polygon2D" parent="Environment/Sprites"]
texture_repeat = 2
position = Vector2(1191, -853)
scale = Vector2(1.10874, 1.11339)
texture = ExtResource("2_1wljg")
texture_offset = Vector2(0, 3750)
texture_scale = Vector2(0.25, 0.25)
polygon = PackedVector2Array(-10844.7, 336.809, 12102, 370.939, 12109.2, -2749.26, -10918.7, -2722.32)

[node name="Chonki" parent="." instance=ExtResource("3_meeps")]
z_index = 1
position = Vector2(196, -2756)
scale = Vector2(1.76, 1.76)
heart_texture = ExtResource("4_ee0bn")
jump_multiplier = 1.25

[node name="NPCs" type="Node2D" parent="."]
position = Vector2(-25, 628)

[node name="Dogs" type="Node2D" parent="NPCs"]

[node name="NPCDog4" parent="NPCs/Dogs" instance=ExtResource("5_c0o7x")]
z_index = 1
position = Vector2(6729, -3708)
is_flipped = true

[node name="NPCDogMom" parent="NPCs/Dogs" instance=ExtResource("5_c0o7x")]
position = Vector2(4095, -4399)
scale = Vector2(4, 4)

[node name="NPCDog3" parent="NPCs/Dogs" instance=ExtResource("5_c0o7x")]
position = Vector2(2000, -3766)

[node name="NPCDog2" parent="NPCs/Dogs" instance=ExtResource("5_c0o7x")]
position = Vector2(2411, -3512)

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="NPCs/Dogs"]
visible = false
position = Vector2(-8398, -2174)
navigation_polygon = SubResource("NavigationPolygon_fowkj")

[node name="ChaseDog" parent="NPCs/Dogs/NavigationRegion2D" instance=ExtResource("5_c0o7x")]
position = Vector2(14851, -1906)
is_flipped = true

[node name="NavigationAgent2D" type="NavigationAgent2D" parent="NPCs/Dogs/NavigationRegion2D"]
script = ExtResource("7_dep77")

[node name="CanvasLayer" type="CanvasLayer" parent="."]
follow_viewport_enabled = true

[node name="LeftOrRightText" parent="CanvasLayer" instance=ExtResource("7_2gl52")]
script = ExtResource("7_y0mp2")
content = "Press left or right to move"
id = "MoveLeftOrRight"

[node name="JumpText" parent="CanvasLayer" instance=ExtResource("7_2gl52")]
offset_left = 5817.0
offset_top = -5328.0
offset_right = 8047.0
offset_bottom = -5288.0
script = ExtResource("9_72lhp")
content = "Press up to jump"
id = "Jump"

[node name="Items" type="Node2D" parent="." groups=["Items"]]

[node name="HayBall" type="RigidBody2D" parent="Items"]
unique_name_in_owner = true
z_index = 3
position = Vector2(-12902, -2658)
collision_layer = 4
collision_mask = 5
mass = 0.5
physics_material_override = SubResource("PhysicsMaterial_xtrc5")
gravity_scale = 3.0

[node name="Sprite2D" type="Sprite2D" parent="Items/HayBall"]
position = Vector2(8841, -3244)
scale = Vector2(2.71997, 2.75545)
texture = ExtResource("9_hvagn")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Items/HayBall"]
position = Vector2(8837, -3236)
scale = Vector2(1.48002, 1.48002)
shape = SubResource("CircleShape2D_rar7w")

[node name="ForkLift" type="Node2D" parent="Items"]
scale = Vector2(0.925254, 0.99869)

[node name="ForkLiftBody" type="StaticBody2D" parent="Items/ForkLift"]
position = Vector2(11227, -2854)
collision_layer = 12
collision_mask = 7

[node name="ForkLiftSprite" type="Sprite2D" parent="Items/ForkLift/ForkLiftBody"]
position = Vector2(3198.7, -1862.14)
scale = Vector2(18.0412, 16.1566)
texture = ExtResource("9_ffq42")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Items/ForkLift/ForkLiftBody"]
position = Vector2(3167.68, -1873.94)
shape = SubResource("RectangleShape2D_1xynk")

[node name="ForkLiftForks" type="CharacterBody2D" parent="Items/ForkLift"]
script = ExtResource("13_xew14")

[node name="Sprite2D" type="Sprite2D" parent="Items/ForkLift/ForkLiftForks"]
position = Vector2(10452.3, -7383.67)
scale = Vector2(6.49039, 6.49039)
texture = ExtResource("10_lykgv")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Items/ForkLift/ForkLiftForks"]
position = Vector2(10349.6, -6272.22)
scale = Vector2(119.454, 119.454)
shape = SubResource("RectangleShape2D_ih5xv")

[node name="Lever" parent="Items" instance=ExtResource("13_50tjc")]
position = Vector2(2771, 8)

[node name="InstructionTriggers" type="Node2D" parent="."]

[node name="LeftOrRightTrigger" parent="InstructionTriggers" instance=ExtResource("12_hq858")]

[node name="JumpTrigger" parent="InstructionTriggers" instance=ExtResource("12_hq858")]
position = Vector2(4672, -252)
instructions_id = "Jump"

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="."]
position = Vector2(-2558, -4840)
navigation_polygon = SubResource("NavigationPolygon_n5sh2")

[node name="FollowerMovesToTarget" parent="NavigationRegion2D" node_paths=PackedStringArray("follower", "target") instance=ExtResource("17_pk6v0")]
follower = NodePath("../Follower")
target = NodePath("../Target")

[node name="Follower" type="Sprite2D" parent="NavigationRegion2D"]
position = Vector2(155, 660)
scale = Vector2(2.78125, 2.375)
texture = SubResource("GradientTexture2D_pk8wi")

[node name="Target" type="Sprite2D" parent="NavigationRegion2D"]
position = Vector2(1304, 169)
scale = Vector2(2.78125, 2.375)
texture = SubResource("GradientTexture2D_8sq0x")
