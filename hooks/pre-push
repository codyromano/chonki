#!/bin/sh
# Pre-push hook to run GUT tests before pushing

echo "Running GUT tests before push..."

# Run GUT tests in headless mode
/Applications/Godot.app/Contents/MacOS/Godot --headless -s addons/gut/gut_cmdln.gd

# Capture the exit code
TEST_EXIT_CODE=$?

# Check if tests passed
if [ $TEST_EXIT_CODE -ne 0 ]; then
    echo "❌ Tests failed! Push aborted."
    echo "Please fix the failing tests before pushing."
    exit 1
fi

echo "✅ All tests passed! Proceeding with push..."
exit 0
